---
title: day174-contenteditable
tags: 
- 前端
categories: 
- 技术
date:  2019-7-6
grammar_cjkRuby: true
---
### 要点

**contenteditable**
利用`contenteditable`来做行内编辑。与利用`input`的区别是，能够保留内容的样式，而`input`内输入的是纯文本。
这里依靠`Vue2`做了一个小组件。
<!--more-->

### 应用

EditDiv组件

```js
<!-- EditDiv Vue 2 contentEditable with v-model -->
<template>
  <div
    ref="diveditable"
    contenteditable
    v-on="listeners"
    class="edit-div"
  >
  </div>
</template>

<script>
export default {
  name: 'EditDiv',
  props: {
    value: {
      type: String,
      default: ''
    }
  },
  data () {
    return {}
  },
  computed: {
    listeners () {
      return { ...this.$listeners, input: this.onInput }
    }
  },
  mounted () {
    this.$refs.diveditable.innerText = this.value
  },
  methods: {
    onInput (e) {
      this.$emit('input', e.target.innerText)
    }
  },
  created () {}
}
</script>
<style lang='less' scoped>
.edit-div {
    width: 100%;
    height: 100%;
    overflow: auto;
    word-break: break-all;
    outline: none;
    user-select: text;
    white-space: pre-wrap;
    text-align: left;
    &[contenteditable=true]{
      user-modify: read-write-plaintext-only;
      &:empty:before {
        content: attr(placeholder);
        display: block;
        color: #ccc;
      }
    }
}
</style>
```
