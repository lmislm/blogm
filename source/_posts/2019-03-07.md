---
title: day55-uncurrying
tags: 
- 前端
categories: 
- 技术
date:  2019-3-7
grammar_cjkRuby: true
---
### 背景
让对象借用原本不属于他的方法，我们可以用call,apply把任意对象当做this传入某个方法。有没有能够把this提取出来，并得到更广的适用性？

![](https://ws1.sinaimg.cn/large/b15ca614gy1g0umna40mhj20dw099wf6.jpg)
<!--more-->
### uncurrying 实现
+ 实现方式之一
```javascript
Function.prototype.uncurrying = function () {
  let self = this
  return function () {
    let obj = Array.prototype.shift.call(arguments)
    return self.apply(obj, arguments)
  }
}
```
+ 实现方法二
```javascript
Function.prototype.uncurrying = function () {
  let self = this
  return function () {
    return Function.prototype.call.apply(self, arguments)
  }
}
```
### uncurrying应用
通过uncurrying方式，push 函数的作用和Array.prototype.push.call()一样
+ 方法一的应用
```javascript
let push = Array.prototype.push.uncurrying()
let obj = {
  'length': 1,
  '0': 1
}
push(obj, 2)
console.log(obj)
```
+ 发生了什么？
```javascript
Function.prototype.uncurrying = function () {
  let self = this // self 此时是Array.prototype.push()
  return function () {
    let obj = Array.prototype.shift.call(arguments)
    /**
     * obj是{
     *    'length': 1,
     *    '0': 1
     * }
     * argument 对象的第一个元素被截去，剩下[2]
     */
    return self.apply(obj, arguments)
  }
}
```
#### 参考
[1].《JavaScript设计模式与开发实践》- 曾探
