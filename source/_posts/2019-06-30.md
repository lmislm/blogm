---
title: day168-TypeScript基础小记-private与protected
tags: 
- 前端
categories: 
- 技术
date:  2019-6-30
grammar_cjkRuby: true
---
### 要点
1. `private`、`protected`类型的比较。
2. `private`、`protected`修饰符。
3. `protected`与类。
<!--more-->

### 类型比较

1. 比较不同的类型时，如果所有成员类型都是兼容的，就认为类型是兼容的。
2. 比较`private`或`protected`成员的类型时，只有来自**同一处声明**时，才认为两个类型是**兼容**的。

例子1
`Employee`赋值给`Animal`时，类型不兼容，因为`Employee`里也有一个`私有成员name`，但并不是`Animal`里面定义的那个。
```js
class Animal {
  private name: string
  constructor(theName: string) { this.name = theName }
}
class Rhino extends Animal {
  constructor() { super('犀牛哥已提前就位') }
}
class Employee {
  private name: string
  constructor(theName: string) { this.name = theName }
}
let animal = new Animal('羊总')
let rhino = new Rhino()
let employee = new Employee('护林员')
animal = rhino
// 不能将类型“Employee”分配给类型“Animal”。类型具有私有属性“name”的单独声明。ts(2322)
// 注意定义的private name相同
animal = employee
```
### `private`、`protected`修饰符

1. `protected` 修饰符与 `private` 修饰符的行为相似，但有不同，`protected` 成员在`派生类`中仍然可以访问。
  
2. 例子1
> 不能在`Person`类外使用`name`，但是可以通过子类`Employee`类实例方法访问，因为`Employee`是由`Person`派生而来。

```js
class Person {
  protected name: string
  constructor(name: string) { this.name = name }
}
class Employee extends Person {
  private department: string
  constructor(name: string, department: string) {
    super(name)
    this.department = department
  }
  public getElevatorPitch () {
    return `你好，老弟。我叫 ${this.name} 在附近 ${this.department} 工作`
  }
}
let howard = new Employee('小刘', '小卖部')
console.log(howard.getElevatorPitch())
// 属性“name”受保护，只能在类“Person”及其子类中访问。ts(2445)
console.log(howard.name)
```

### `protected`与类

`构造函数`也可以被标记成`protected`。意味着，这个类不能在包含它的类外被`实例化`，但是能被继承
```js
class Person {
  protected name: string
  protected constructor(theName: string) { this.name = theName }
}
class Employee extends Person {
  private department: string
  constructor(name: string, department: string) {
    super(name)
    this.department = department
  }
  public getElevatorPitch () {
    return `你好，老哥。我叫${this.name}，我家搁附近${this.department}。`
  }
}
let howard = new Employee('二柱子', '洞拐八拐银行附近')
// 类“Person”的构造函数是受保护的，仅可在类声明中访问。ts(2674)
let john = new Person('铁蛋')
```
