---
title: day176-TypeScript基础小记-构造函数
tags: 
- 前端
categories: 
- 技术
date:  2019-7-9
grammar_cjkRuby: true
---
### 要点

1. 构造函数。
2. 编译成JavaScript后。
3. 把类当做接口使用。
<!--more-->

### 构造函数

> 简单的构造函数

```js
class Greeter {
  greeting: string
  constructor(message: string) {
    this.greeting = message
  }
  greet() {
    return 'Hello,' + this.greeting
  }
}
let greeter: Greeter // Greeter类的实例的类型是Greeter
greeter = new Greeter('TypeScript')
console.log(greeter.greet())
```

### 编译成JavaScript

> `let Greeter`被赋值为`构造函数`。

```js
let Greeter = (function () {
  function Greeter(message) {
    this.greeting = message
  }
  Greeter.prototype.greet = function () {
    return 'Hello,' + this.greeting
  }
  return Greeter
})()
let greeter
greeter = new Greeter('world')
console.log(greeter.greet())
```

> 例子改写

```js
class Greeter {
  static standardGreeting = 'hello, there'
  greeting: string
  greet () {
    if (this.greeting) {
      return 'hello,' + this.greeting
    } else {
      return Greeter.standardGreeting
    }
  }
}
let greeter1: Greeter
greeter1 = new Greeter()
console.log(greeter1)
// typeof Greeter意思取Greeter类的类型，而不是实例类型。
let greeterMaker: typeof Greeter = Greeter
greeterMaker.standardGreeting = 'Hey there!'
let greeter2: Greeter = new greeterMaker()
console.log(greeter2.greet())
```

### 类当做接口使用

> 类定义会创建两个东西：
> 类的实例累心和一个构造函数（因为类可以创建出类型，所以你能够在允许使用接口的地方使用类）
```js
class Point {
  x: number
  y: number
}
interface Point3d extends Point {
  z: number
}
let point3d: Point3d = { x: 1, y: 2, z: 3 }
```
