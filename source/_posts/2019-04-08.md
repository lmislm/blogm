---
title: day87-生成器迭代器
tags: 
- 前端
categories: 
- 技术
date:  2019-4-8
grammar_cjkRuby: true
---
### 前言
生成器实现day86中的something无限数字序列生产者

![Photo by Paulin Malet on Unsplash](https://ws1.sinaimg.cn/large/b15ca614gy1g1vn1giw3bj20dw099glw.jpg)
Photo by Paulin Malet on Unsplash

<!--more-->
### 实现生产者
```javascript
function *something() {
  let nextVal
  while (true) {
    if (nextVal === undefined) {
      nextVal = 1
    } else {
      nextVal = (3 * nextVal) + 6
    }
    // 生成器在每次迭代中暂停.
    // 通过yield返回到主程序或事件循环队列中。
    // --函数*something()的作用域会被保持（即不需要闭包在调用直接保持变量作用域）
    yield nextVal
  }
}
```
### 应用
for...of循环使用*something()生成器
>**注意**这里是something()而不是something。因为这里something是生成器不是迭代器。
something()调用产生一个迭代器，但是for...of需要一个**iterable**（可迭代：一个包含在其值上迭代的迭代器的对象）。
这是因为生成器的迭代器也有一个Symbol.iterator函数,而这个函数做的就是return this,
和之前迭代器里定义的iterable something一样，即生成器的迭代器也是一个iterable（可迭代）。

```javascript
for (let v of something()) {
  console.log(v)
  // 不要死循环
  if (v > 500) {
    break
  }
}
// 1 9 33 105 321 969
```

