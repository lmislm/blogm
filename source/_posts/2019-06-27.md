---
title: day165-TypeScript基础小记-类
tags: 
- 前端
categories: 
- 技术
date:  2019-6-27
grammar_cjkRuby: true
---
### 要点

1. 类类型
2. 类静态部分和实例部分的区别
3. 直接操作类的静态部分
4. 使用`类表达式`直接操作类的静态部分
<!--more-->

#### 类类型
> 强制一个类去符合
> 实现接口
```js
interface ClockInterface {
  currentTime: Date
}
class Clock implements ClockInterface {
  currentTime: Date = new Date()
  constructor(h: number, m: number) {}
}
interface ClockInterface {
  currentTime: Date
  setTime(d: Date): void
}
```
> 接口描述类的公共部分
```js
interface ClockInterface {
  currentTime: Date
  // 在接口中描述一个方法，在类里实现
  setTime(d: Date): void
}
class Clock implements ClockInterface {
  currentTime: Date = new Date()
  setTime(d: Date) {
    this.currentTime = d
  }
  constructor(h: number, m: number) {}
}
```
#### 类静态部分和实例部分的区别
```js
interface ClockConstructor {
  // h: hour, m: minute
  /** 构造器 */
  new (h: number, m: number)
}
// 类实现接口时，只对实例部分进行类型检查。而constructor存在于类的静态部分
class Clock implements ClockConstructor {
  currentTime: Date
  // 缺少构造函数实现。ts(2390)
  // constructor(h: number, m: number)
}
```

#### 直接操作类的静态部分
> 定义两个接口，分别为`构造函数`和`实例方法`所用

```js
interface ClockConstructor {
  new (h: number, m: number): ClockInterface
}
interface ClockInterface {
  tick(): void
}
/** ClockConstructor为构造函数所用 */
function createClock (ctor: ClockConstructor, h: number, m: number): ClockInterface {
  return new ctor(h, m)
}
/** ClockInterface为实例方法所用 */
class DigitalClock implements ClockInterface {
  constructor(h: number, m: number) {}
  tick () {
    console.log('beep')
  }
}
class AnalogClock implements ClockInterface {
  constructor(h: number, m: number) {}
  tick () {
    console.log('tick tock')
  }
}
let digital = createClock(DigitalClock, 12, 17)
// 检查AnalogClock是否符合构造函数签名
let analog = createClock(AnalogClock, 7, 32)
```

#### 使用`类表达式`直接操作类的静态部分
```js
interface ClockConstructor {
  new (h: number, m: number)
}
interface ClockInterface {
  tick()
}
const Clock: ClockConstructor = class Clock implements ClockInterface {
  constructor(h: number, m: number) {}
  tick () {
    console.log('beep')
  }
}
```