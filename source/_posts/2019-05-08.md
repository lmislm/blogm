---
title: day116-手写JSON.stringify
tags: 
- 前端
categories: 
- 技术
date:  2019-5-8
grammar_cjkRuby: true
---
### 前言
没啥可说的，这篇比较水。
`JSON.stringify(value[, replacer [, space]])`

<!--more-->
### 代码
```javascript
function jsonStringify(obj) {
  let type = typeof obj
  if (type !== "object") {
    // undefined 什么的会被忽略，循环引用也会被忽略
    if (/string|undefined|function/.test(type)) {
      obj = '"' + obj + '"'
    }
    return String(obj)
  } else {
    let json = []
    let arr = Array.isArray(obj)
    for (let k in obj) {
      let v = obj[k]
      let type = typeof v
      if (/string|undefined|function/.test(type)) {
        v = '"' + v + '"'
      } else if (type === "object") {
        v = jsonStringify(v)
      }
      json.push((arr ? "" : '"' + k + '":') + String(v))
    }
    return (arr ? "[" : "{") + String(json) + (arr ? "]" : "}")
  }
}
```

### 参考

[JavaScript手写代码无敌秘籍][1]

  [1]: https://juejin.im/post/5c9c3989e51d454e3a3902b6#heading-1