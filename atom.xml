<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>LMISLMのBlog</title>
  
  <subtitle>不积小流，无以成江海。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://lmislm.com/"/>
  <updated>2019-04-13T15:59:15.517Z</updated>
  <id>http://lmislm.com/</id>
  
  <author>
    <name>lmislm</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>day92-promise单一值传递（局限性）</title>
    <link href="http://lmislm.com/2019/04/13/2019-04-13/"/>
    <id>http://lmislm.com/2019/04/13/2019-04-13/</id>
    <published>2019-04-12T16:00:00.000Z</published>
    <updated>2019-04-13T15:59:15.517Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>promise只能是一个完成值和一个拒绝理由。但是这造成了现状只能是构造一个值封装来保存多个信息。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g21g6gy76bj20dw0983ym.jpg" alt=""><br>Photo by Min Wu on Unsplash<br><a id="more"></a></p><h3 id="Promise的分裂值"><a href="#Promise的分裂值" class="headerlink" title="Promise的分裂值"></a>Promise的分裂值</h3><p>异步产生的两个值，封装到一个数组值中通过promise传输<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getY</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve((<span class="number">3</span>*x) - <span class="number">1</span>)</span><br><span class="line">    &#125;, <span class="number">100</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">bar, baz</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> x = bar * baz</span><br><span class="line">  <span class="keyword">return</span> getY(x)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">y</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 把两个值封装在容器中</span></span><br><span class="line">    <span class="keyword">return</span> [x, y]</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">foo (<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> x = msgs[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">let</span> y = msgs[<span class="number">1</span>]</span><br><span class="line">  <span class="built_in">console</span>.log(x, y) <span class="comment">// 200 599</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="展开-传递参数"><a href="#展开-传递参数" class="headerlink" title="展开/传递参数"></a>展开/传递参数</h3><p>利用apply.bind的技巧。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">spread</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Function</span>.apply.bind(fn, <span class="literal">null</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Promise</span>.all(foo(<span class="number">10</span>, <span class="number">20</span>))</span><br><span class="line">.then(spread(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x, y) <span class="comment">// 200 599</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure></p><h3 id="数组解构赋值ES6"><a href="#数组解构赋值ES6" class="headerlink" title="数组解构赋值ES6"></a>数组解构赋值ES6</h3><p>这个比上面的都更加的灵活。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all(foo(<span class="number">10</span>, <span class="number">20</span>))</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span> (<span class="params">msgs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [x,y] = msgs</span><br><span class="line">  <span class="built_in">console</span>.log(x, y) <span class="comment">// 200 599</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>更好的。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all(foo(<span class="number">10</span>, <span class="number">20</span>))</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span> (<span class="params">[x,y]</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x,y) <span class="comment">// 200 599</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;promise只能是一个完成值和一个拒绝理由。但是这造成了现状只能是构造一个值封装来保存多个信息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g21g6gy76bj20dw0983ym.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;Photo by Min Wu on Unsplash&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="http://lmislm.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day91-Promise的并发迭代</title>
    <link href="http://lmislm.com/2019/04/12/2019-04-12/"/>
    <id>http://lmislm.com/2019/04/12/2019-04-12/</id>
    <published>2019-04-11T16:00:00.000Z</published>
    <updated>2019-04-12T16:04:23.939Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>多任务执行。对所有Promise执行某个任务。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g20ag1vta1j20dw0a9gmb.jpg" alt=""><br><a id="more"></a></p><h3 id="实现版本一"><a href="#实现版本一" class="headerlink" title="实现版本一"></a>实现版本一</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Promise 的并发迭代</span></span><br><span class="line"><span class="comment">// 不太好的方法</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">Promise</span>.map) &#123;</span><br><span class="line">  <span class="built_in">Promise</span>.map = <span class="function"><span class="keyword">function</span> (<span class="params">vals, cb</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 一个等待所有map的promise的新promise</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.all(</span><br><span class="line">      <span class="comment">// 一般数组把map(..),把值数组转换成为promise数组</span></span><br><span class="line">      vals.map(<span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 用val异步map之后决议的新promise替换val</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">          cb(val, resolve)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 这里不能发送异步reject信号，映射的回调中(cb(..))出现同步的异常或错误</span></span><br><span class="line"><span class="comment">// 主Promise.map(..)返回的Promise就会拒绝</span></span><br></pre></td></tr></table></figure><h3 id="较好的方法"><a href="#较好的方法" class="headerlink" title="较好的方法"></a>较好的方法</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 较好的方法</span></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.resolve(<span class="number">21</span>)</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="built_in">Promise</span>.resolve(<span class="number">42</span>)</span><br><span class="line"><span class="keyword">let</span> p3 = <span class="built_in">Promise</span>.resolve(<span class="string">'oops 404'</span>)</span><br><span class="line"><span class="comment">// 列表值加倍，即使是在Promise中</span></span><br><span class="line"><span class="built_in">Promise</span>.map([p1,p2,p3], <span class="function"><span class="keyword">function</span> (<span class="params">pr, done</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 保证这一条本身就是Promise</span></span><br><span class="line">  <span class="built_in">Promise</span>.resolve(pr)</span><br><span class="line">    .then(</span><br><span class="line">      <span class="comment">// 提取值作为v</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// map完成的v到新值</span></span><br><span class="line">        done(v*<span class="number">2</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 或者map到promise拒绝消息</span></span><br><span class="line">      done</span><br><span class="line">    )</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span> (<span class="params">vals</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(vals) <span class="comment">// [42, 84, 'oops 404]</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;多任务执行。对所有Promise执行某个任务。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g20ag1vta1j20dw0a9gmb.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="http://lmislm.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day90-支持Promise的Generator Run</title>
    <link href="http://lmislm.com/2019/04/11/2019-04-11/"/>
    <id>http://lmislm.com/2019/04/11/2019-04-11/</id>
    <published>2019-04-10T16:00:00.000Z</published>
    <updated>2019-04-11T15:46:50.161Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>专门处理。生成器yield出Promise，然后其控制生成器的迭代器来执行它，直到结束。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1z4l15uxpj20dw099t96.jpg" alt=""><br>Photo by Johannes Krupinski on Unsplash<br><a id="more"></a></p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span> (<span class="params">gen</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> args = [].slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>), it</span><br><span class="line">  <span class="comment">// 在当前上下文初始化生成器</span></span><br><span class="line">  it = gen.apply(<span class="keyword">this</span>, args)</span><br><span class="line">  <span class="comment">// 返回一个promise用于生成器完成</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve()</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span> <span class="title">handleNext</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 对下一个yield出的值运行</span></span><br><span class="line">      <span class="keyword">let</span> next = it.next(value)</span><br><span class="line">      <span class="keyword">return</span> (<span class="function"><span class="keyword">function</span> <span class="title">handleResult</span>(<span class="params">next</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 生成器运行完毕了吗</span></span><br><span class="line">        <span class="keyword">if</span> (next.done) &#123;</span><br><span class="line">          <span class="keyword">return</span> next.value</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">//否则继续运行</span></span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(next.value)</span><br><span class="line">            .then(</span><br><span class="line">              <span class="comment">// 成功就恢复异步循环，把决议的值发回生成器</span></span><br><span class="line">              handleNext,</span><br><span class="line">              <span class="comment">// 如果value是被拒绝的promise</span></span><br><span class="line">              <span class="comment">// 就把错误传回生成器进行出错处理</span></span><br><span class="line">              <span class="function"><span class="keyword">function</span> <span class="title">handleErr</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(</span><br><span class="line">                  it.throw(err)</span><br><span class="line">                )</span><br><span class="line">                .then(handleResult)</span><br><span class="line">              &#125;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)(next)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="comment">// ..</span></span><br><span class="line">&#125;</span><br><span class="line">run(main)<span class="comment">// 自动异步运行你传给它的生成器</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;专门处理。生成器yield出Promise，然后其控制生成器的迭代器来执行它，直到结束。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1z4l15uxpj20dw099t96.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;Photo by Johannes Krupinski on Unsplash&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="http://lmislm.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day89-回调未调用（Promise）</title>
    <link href="http://lmislm.com/2019/04/10/2019-04-10/"/>
    <id>http://lmislm.com/2019/04/10/2019-04-10/</id>
    <published>2019-04-09T16:00:00.000Z</published>
    <updated>2019-04-10T15:29:05.640Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>回调函数本身包含JavaScript错误，Promise本身永远不被决议。怎么办？</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614ly1g1xxm4ej1tj20dw099q3d.jpg" alt=""></p><a id="more"></a><h3 id="竞态-高级抽象机制"><a href="#竞态-高级抽象机制" class="headerlink" title="竞态(高级抽象机制)"></a><em>竞态</em>(高级抽象机制)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 用于超时一个Promise的工具</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeoutPromise</span> (<span class="params">delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      reject(<span class="string">'timeout!'</span>)</span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置foo()超时</span></span><br><span class="line"><span class="built_in">Promise</span>.race([</span><br><span class="line">  foo(),</span><br><span class="line">  timeoutPromise(<span class="number">3000</span>)</span><br><span class="line">])</span><br><span class="line">.then(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// foo(..)及时完成</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 或者foo()被拒绝，只是没能按时完成</span></span><br><span class="line">    <span class="comment">// 查看err来了解是哪种情况</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;回调函数本身包含JavaScript错误，Promise本身永远不被决议。怎么办？&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614ly1g1xxm4ej1tj20dw099q3d.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://lmislm.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day88-异步迭代生成器</title>
    <link href="http://lmislm.com/2019/04/09/2019-04-09/"/>
    <id>http://lmislm.com/2019/04/09/2019-04-09/</id>
    <published>2019-04-08T16:00:00.000Z</published>
    <updated>2019-04-09T15:29:45.065Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>本文展示一个任务流程控制，通过生成器来解决解决回调问题。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1wsurf0htj20dw09ajru.jpg" alt=""><br>Photo by Dan Magatti on Unsplash</p><h3 id="回调方法"><a href="#回调方法" class="headerlink" title="回调方法"></a>回调方法</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y, cb</span>) </span>&#123;</span><br><span class="line">  ajax(</span><br><span class="line">    <span class="string">'http://some.url.1'</span>,</span><br><span class="line">    cb</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">foo (<span class="number">11</span>, <span class="number">32</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(text)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="生成器方法实现"><a href="#生成器方法实现" class="headerlink" title="生成器方法实现"></a>生成器方法实现</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过生成器来表达同样的任务流程控制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  ajax(</span><br><span class="line">    <span class="string">'http://some.url.1'</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">err, next</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 向*main()抛出一个错误</span></span><br><span class="line">        it.throw(err)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 响应数据恢复生成器</span></span><br><span class="line">        it.next(data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 重要的部分。调用一个普通函数foo(..),且能从ajax调用中得到text,即使函数是异步。</span></span><br><span class="line">    <span class="keyword">let</span> text = <span class="keyword">yield</span> foo(<span class="number">11</span>, <span class="number">31</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(text)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> it = main()</span><br><span class="line"><span class="comment">// 启动！</span></span><br><span class="line">it.next()</span><br></pre></td></tr></table></figure><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;本文展示一个任务流程控制，通过生成器来解决解决回调问题。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1wsurf0htj20dw09ajru.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;Photo by Dan Magatti on Unsplash&lt;/p&gt;
&lt;h3 id=&quot;回调方法&quot;&gt;&lt;a href=&quot;#回调方法&quot; class=&quot;headerlink&quot; title=&quot;回调方法&quot;&gt;&lt;/a&gt;回调方法&lt;/h3&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;foo&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;x, y, cb&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ajax(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;http://some.url.1&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;foo (&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;err, next&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (err) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.error(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(text)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;生成器方法实现&quot;&gt;&lt;a href=&quot;#生成器方法实现&quot; class=&quot;headerlink&quot; title=&quot;生成器方法实现&quot;&gt;&lt;/a&gt;生成器方法实现&lt;/h3&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 通过生成器来表达同样的任务流程控制&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;foo&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;x, y&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ajax(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;http://some.url.1&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;err, next&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (err) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 向*main()抛出一个错误&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        it.throw(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	  &lt;span class=&quot;comment&quot;&gt;// 响应数据恢复生成器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        it.next(data)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; *&lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 重要的部分。调用一个普通函数foo(..),且能从ajax调用中得到text,即使函数是异步。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; text = &lt;span class=&quot;keyword&quot;&gt;yield&lt;/span&gt; foo(&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;31&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(text)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (err) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.error(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; it = main()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 启动！&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;it.next()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术" scheme="http://lmislm.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day87-生成器迭代器</title>
    <link href="http://lmislm.com/2019/04/08/2019-04-08/"/>
    <id>http://lmislm.com/2019/04/08/2019-04-08/</id>
    <published>2019-04-07T16:00:00.000Z</published>
    <updated>2019-04-08T15:24:07.187Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>生成器实现day86中的something无限数字序列生产者</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1vn1giw3bj20dw099glw.jpg" alt="Photo by Paulin Malet on Unsplash"><br>Photo by Paulin Malet on Unsplash</p><a id="more"></a><h3 id="实现生产者"><a href="#实现生产者" class="headerlink" title="实现生产者"></a>实现生产者</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">something</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> nextVal</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nextVal === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      nextVal = <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      nextVal = (<span class="number">3</span> * nextVal) + <span class="number">6</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 生成器在每次迭代中暂停.</span></span><br><span class="line">    <span class="comment">// 通过yield返回到主程序或事件循环队列中。</span></span><br><span class="line">    <span class="comment">// --函数*something()的作用域会被保持（即不需要闭包在调用直接保持变量作用域）</span></span><br><span class="line">    <span class="keyword">yield</span> nextVal</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><p>for…of循环使用*something()生成器</p><blockquote><p><strong>注意</strong>这里是something()而不是something。因为这里something是生成器不是迭代器。<br>something()调用产生一个迭代器，但是for…of需要一个<strong>iterable</strong>（可迭代：一个包含在其值上迭代的迭代器的对象）。<br>这是因为生成器的迭代器也有一个Symbol.iterator函数,而这个函数做的就是return this,<br>和之前迭代器里定义的iterable something一样，即生成器的迭代器也是一个iterable（可迭代）。</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> something()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(v)</span><br><span class="line">  <span class="comment">// 不要死循环</span></span><br><span class="line">  <span class="keyword">if</span> (v &gt; <span class="number">500</span>) &#123;</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 9 33 105 321 969</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;生成器实现day86中的something无限数字序列生产者&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1vn1giw3bj20dw099glw.jpg&quot; alt=&quot;Photo by Paulin Malet on Unsplash&quot;&gt;&lt;br&gt;Photo by Paulin Malet on Unsplash&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://lmislm.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day86-生产者与迭代器</title>
    <link href="http://lmislm.com/2019/04/07/2019-04-07/"/>
    <id>http://lmislm.com/2019/04/07/2019-04-07/</id>
    <published>2019-04-06T16:00:00.000Z</published>
    <updated>2019-04-07T14:20:38.101Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>假定你要产生一<strong>系列值</strong>，其中每个值都与前面一个有特定的关系。要实现这一点，需要一个有状态的生产者能够记住其生成的最后一个值。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1ufm6fjw4j20dw099t8x.jpg" alt=""><br><a id="more"></a></p><h4 id="生产者与迭代器（实现一个直接使用函数闭包的版本）"><a href="#生产者与迭代器（实现一个直接使用函数闭包的版本）" class="headerlink" title="生产者与迭代器（实现一个直接使用函数闭包的版本）"></a>生产者与迭代器（实现一个直接使用函数闭包的版本）</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数字序列生成器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> gimmeSomething = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> nextVal</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nextVal === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      nextVal = <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      nextVal = (<span class="number">3</span> * nextVal) + <span class="number">6</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nextVal</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line">注意这里<span class="built_in">console</span>一个和多个是不一样的</span><br><span class="line"><span class="built_in">console</span>.log(gimmeSomething()) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(gimmeSomething()) <span class="comment">// 9</span></span><br><span class="line"><span class="built_in">console</span>.log(gimmeSomething()) <span class="comment">// 33</span></span><br></pre></td></tr></table></figure><h4 id="为数字迭代生成器生成标准的迭代器接口"><a href="#为数字迭代生成器生成标准的迭代器接口" class="headerlink" title="为数字迭代生成器生成标准的迭代器接口"></a>为数字迭代生成器生成标准的迭代器接口</h4><p>迭代器是一个定义好的借口，用于从一个生产者一步步得到一系列值。<br>JavaScript 迭代器的接口，与多数语言类似，就是每次想要从生产者得到下一个值的时候调用next()<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> something = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> nextVal</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// for...of循环需要</span></span><br><span class="line">    [<span class="built_in">Symbol</span>.iterator]: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span> &#125;,</span><br><span class="line">    <span class="comment">// 标准迭代器接口方法</span></span><br><span class="line">    next: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (nextVal === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        nextVal = <span class="number">1</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        nextVal = (<span class="number">3</span> * nextVal) + <span class="number">6</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">done</span>: <span class="literal">false</span>, <span class="attr">value</span>: nextVal &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"><span class="built_in">console</span>.log(something.next().value) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(something.next().value) <span class="comment">// 9</span></span><br></pre></td></tr></table></figure></p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p>引自：《你不知道的JavaScript - 中》</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;假定你要产生一&lt;strong&gt;系列值&lt;/strong&gt;，其中每个值都与前面一个有特定的关系。要实现这一点，需要一个有状态的生产者能够记住其生成的最后一个值。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1ufm6fjw4j20dw099t8x.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="http://lmislm.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day85-事件循环最基本的伪代码</title>
    <link href="http://lmislm.com/2019/04/06/2019-04-06/"/>
    <id>http://lmislm.com/2019/04/06/2019-04-06/</id>
    <published>2019-04-05T16:00:00.000Z</published>
    <updated>2019-04-07T14:21:32.466Z</updated>
    
    <content type="html"><![CDATA[<h3 id="事件循环"><a href="#事件循环" class="headerlink" title="事件循环"></a>事件循环</h3><p>通过一小段伪代码来了解一下这个“事件循环”概念。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1talkpisqj20dw09amxo.jpg" alt=""></p><a id="more"></a><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 事件循环伪代码</span></span><br><span class="line"><span class="comment">// event loop是一个用作队列的数组</span></span><br><span class="line"><span class="keyword">let</span> eventLoop = []</span><br><span class="line"><span class="keyword">let</span> event</span><br><span class="line"><span class="comment">// 永远执行</span></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">// 一次tick</span></span><br><span class="line">  <span class="keyword">if</span> (eventLoop.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 拿到队列的下一个事件</span></span><br><span class="line">    event = eventLoop.shift()</span><br><span class="line">    <span class="comment">// 现在，执行下一个事件</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      event()</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      reportError(err)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 注意setTimeOut()并没有把你的回调函数挂在事件循环队列中，只是设定一个定时器。</span></span><br><span class="line"><span class="comment">// 当定时器到时后，环境会把你的回调函数放在事件循环中，这样，在未来某个时刻的tick就会摘下</span></span><br><span class="line"><span class="comment">// 并执行这个回调。</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;事件循环&quot;&gt;&lt;a href=&quot;#事件循环&quot; class=&quot;headerlink&quot; title=&quot;事件循环&quot;&gt;&lt;/a&gt;事件循环&lt;/h3&gt;&lt;p&gt;通过一小段伪代码来了解一下这个“事件循环”概念。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1talkpisqj20dw09amxo.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://lmislm.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day84-实现原型链(基本模式)</title>
    <link href="http://lmislm.com/2019/04/05/2019-04-05/"/>
    <id>http://lmislm.com/2019/04/05/2019-04-05/</id>
    <published>2019-04-04T16:00:00.000Z</published>
    <updated>2019-04-05T11:18:46.168Z</updated>
    
    <content type="html"><![CDATA[<h3 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h3><blockquote><p>实现原型链有一种基本模式，其代码大致如下。</p></blockquote><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1rz4bqsc3j20dw099gml.jpg" alt=""><br><a id="more"></a><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 实现原型链 基本模式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.property = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.property</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.subproperty = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType()</span><br><span class="line">SubType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.subproperty</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> instance = <span class="keyword">new</span> SubType()</span><br><span class="line"><span class="built_in">console</span>.log(instance.getSuperValue()) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;碎碎念&quot;&gt;&lt;a href=&quot;#碎碎念&quot; class=&quot;headerlink&quot; title=&quot;碎碎念&quot;&gt;&lt;/a&gt;碎碎念&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;实现原型链有一种基本模式，其代码大致如下。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1rz4bqsc3j20dw099gml.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="http://lmislm.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day83-element表格列合并</title>
    <link href="http://lmislm.com/2019/04/04/2019-04-04/"/>
    <id>http://lmislm.com/2019/04/04/2019-04-04/</id>
    <published>2019-04-03T16:00:00.000Z</published>
    <updated>2019-04-04T14:41:20.377Z</updated>
    
    <content type="html"><![CDATA[<h3 id="表格合并-跨行或者跨列）"><a href="#表格合并-跨行或者跨列）" class="headerlink" title="表格合并(跨行或者跨列）"></a>表格合并(跨行或者跨列）</h3><p>有个小需求是表格根据某些属性来合并。element官方提供了方法。但是没有详细的例子。这里记录下一个小例子。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1qzcrwobaj20dw09iweg.jpg" alt=""><br><a id="more"></a></p><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 这里的实现方法可以变化，但是大体思路是一样的。找到某个元素上下前后元素是否相等，相等则为0。</span></span><br><span class="line">getSpanArr(data) &#123;　</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i === <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="keyword">this</span>.spanArr.push(<span class="number">1</span>);</span><br><span class="line">              <span class="keyword">this</span>.pos = <span class="number">0</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 判断当前元素与上一个元素是否相同</span></span><br><span class="line">  <span class="comment">// 这里其实可以简化成table的属性。改成可以配置的选项。</span></span><br><span class="line">    <span class="keyword">if</span> (data[i].name === data[i - <span class="number">1</span>].name) &#123;</span><br><span class="line">                <span class="keyword">this</span>.spanArr[<span class="keyword">this</span>.pos] += <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">this</span>.spanArr.push(<span class="number">0</span>);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.spanArr.push(<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">this</span>.pos = i;</span><br><span class="line">              &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>element :span-method=”cellMerage”\</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">cellMerge(&#123; row, column, rowIndex, columnIndex &#125;) &#123;</span><br><span class="line">      <span class="keyword">if</span> (columnIndex === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> _row = <span class="keyword">this</span>.spanArr[rowIndex];</span><br><span class="line">            <span class="keyword">const</span> _col = _row &gt; <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                  rowspan: _row,</span><br><span class="line">                  colspan: _col</span><br><span class="line">            &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>原文：<a href="https://blog.csdn.net/qq_29468573/article/details/80742646" target="_blank" rel="noopener">https://blog.csdn.net/qq_29468573/article/details/80742646</a> </p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;表格合并-跨行或者跨列）&quot;&gt;&lt;a href=&quot;#表格合并-跨行或者跨列）&quot; class=&quot;headerlink&quot; title=&quot;表格合并(跨行或者跨列）&quot;&gt;&lt;/a&gt;表格合并(跨行或者跨列）&lt;/h3&gt;&lt;p&gt;有个小需求是表格根据某些属性来合并。element官方提供了方法。但是没有详细的例子。这里记录下一个小例子。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1qzcrwobaj20dw09iweg.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="生活" scheme="http://lmislm.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day82-中文排序</title>
    <link href="http://lmislm.com/2019/04/03/2019-04-03/"/>
    <id>http://lmislm.com/2019/04/03/2019-04-03/</id>
    <published>2019-04-02T16:00:00.000Z</published>
    <updated>2019-04-03T13:48:03.564Z</updated>
    
    <content type="html"><![CDATA[<h3 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h3><p>最近有中文排序的需求，这种排序要根据中文推出中文拼音然后再排序。所以免不了查字典。这类的还是比较成熟的，有成熟的方案。比如pinyin.js。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1ps70v2q1j20dw08oq3e.jpg" alt=""><br><a id="more"></a></p><h3 id="pinyin-js"><a href="#pinyin-js" class="headerlink" title="pinyin.js"></a>pinyin.js</h3><p>安装</p><blockquote><p>npm i pinyin</p></blockquote><p>下面以对象的排序为例，其实这个例子官方文档是有的。需要看仔细的可以去官方文档看，还是较为详细的。这里只是简单地引导一下。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> pinyin = <span class="built_in">require</span>(<span class="string">'pinyin'</span>)</span><br><span class="line"><span class="keyword">let</span> data = [&#123;<span class="attr">a</span>: <span class="string">'牛'</span>, <span class="attr">b</span>: <span class="string">'11'</span>&#125;, &#123;<span class="attr">a</span>: <span class="string">'啊'</span>, <span class="attr">b</span>: <span class="string">'22'</span>&#125;, &#123;<span class="attr">a</span>: <span class="string">'到'</span>, <span class="attr">b</span>: <span class="string">'33'</span>&#125;, &#123;<span class="attr">a</span>: <span class="string">'ab'</span>, <span class="attr">b</span>: <span class="string">'53'</span>&#125;]</span><br><span class="line"><span class="comment">// console.log(data.sort(pinyin.compare(a)))</span></span><br><span class="line"><span class="comment">// const data = '我要排序'.split('');</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 建议将汉字的拼音持久化存储起来。</span></span><br><span class="line"><span class="comment">// const pinyinData = data.map(han =&gt; (&#123;</span></span><br><span class="line"><span class="comment">//   zi: han.a,</span></span><br><span class="line"><span class="comment">//   py: pinyin(han.a)[0][0], // 可以自行选择不同的生成拼音方案和风格。</span></span><br><span class="line"><span class="comment">// &#125;))</span></span><br><span class="line"><span class="keyword">const</span> pinyinData = data.map(<span class="function"><span class="params">han</span> =&gt;</span> (&#123;</span><br><span class="line">  ...han,</span><br><span class="line">  py: pinyin(han.a)[<span class="number">0</span>][<span class="number">0</span>], <span class="comment">// 可以自行选择不同的生成拼音方案和风格。</span></span><br><span class="line">&#125;))</span><br><span class="line"><span class="keyword">const</span> sortedData = pinyinData.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a.py.localeCompare(b.py);</span><br><span class="line">&#125;).map(<span class="function"><span class="params">d</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> d.zi</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(pinyinData)</span><br><span class="line"><span class="built_in">console</span>.log(sortedData)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;碎碎念&quot;&gt;&lt;a href=&quot;#碎碎念&quot; class=&quot;headerlink&quot; title=&quot;碎碎念&quot;&gt;&lt;/a&gt;碎碎念&lt;/h3&gt;&lt;p&gt;最近有中文排序的需求，这种排序要根据中文推出中文拼音然后再排序。所以免不了查字典。这类的还是比较成熟的，有成熟的方案。比如pinyin.js。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1ps70v2q1j20dw08oq3e.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="http://lmislm.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day81-了解无头浏览器Puppeteer</title>
    <link href="http://lmislm.com/2019/04/02/2019-04-02/"/>
    <id>http://lmislm.com/2019/04/02/2019-04-02/</id>
    <published>2019-04-01T16:00:00.000Z</published>
    <updated>2019-04-02T15:15:22.167Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>无头浏览器主要是用代码来模拟浏览器操作，如摘取页面元素，进行用户名和密码输入等无界面操作。下面的例子主要是站在JS的角度用Puppeteer来进行简单的了解。因为最近有个小东西可能需要用到。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1op1lasjmj20dw09974r.jpg" alt=""><br><a id="more"></a></p><h3 id="一小段例子"><a href="#一小段例子" class="headerlink" title="一小段例子"></a>一小段例子</h3><p>先安装</p><blockquote><p>npm i puppeteer</p></blockquote><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">'puppeteer'</span>);</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getPic</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123;<span class="attr">headless</span>: <span class="literal">false</span>&#125;)</span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage()</span><br><span class="line">  <span class="comment">// 指定跳向某个页面</span></span><br><span class="line">  <span class="keyword">await</span> page.goto(<span class="string">'https://zhidao.baidu.com/question/446485875.html'</span>)</span><br><span class="line">  <span class="comment">// 截图操作</span></span><br><span class="line">  <span class="keyword">await</span> page.screenshot(&#123;<span class="attr">path</span>: <span class="string">'hello-world.png'</span>&#125;)</span><br><span class="line">  <span class="comment">// await page.waitForNavigation('load') </span></span><br><span class="line">  <span class="comment">// await page.click('#evaluate-3025447784') </span></span><br><span class="line">  <span class="comment">// await page.evaluate(() =&gt; &#123;</span></span><br><span class="line">    <span class="comment">// document.querySelector('#evaluate-3025447784').click()</span></span><br><span class="line">  <span class="comment">//  console.log(window.document.querySelector('#evaluate-3025447784'))</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line">  <span class="comment">// 清空浏览器的cookies</span></span><br><span class="line">  <span class="comment">// await page._client.send('Network.clearBrowserCookies')</span></span><br><span class="line">  <span class="keyword">await</span> browser.close()</span><br><span class="line">&#125;</span><br><span class="line">getPic()</span><br></pre></td></tr></table></figure><p>打开浏览器，跳转到指定页面，然后截图之后关闭浏览器。整个过程为异步进行。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;无头浏览器主要是用代码来模拟浏览器操作，如摘取页面元素，进行用户名和密码输入等无界面操作。下面的例子主要是站在JS的角度用Puppeteer来进行简单的了解。因为最近有个小东西可能需要用到。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1op1lasjmj20dw09974r.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="http://lmislm.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="前端" scheme="http://lmislm.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>day80-vuejs源码解析</title>
    <link href="http://lmislm.com/2019/04/01/2019-04-01/"/>
    <id>http://lmislm.com/2019/04/01/2019-04-01/</id>
    <published>2019-03-31T16:00:00.000Z</published>
    <updated>2019-04-01T15:03:50.723Z</updated>
    
    <content type="html"><![CDATA[<h3 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h3><p>今天就是想简单的讲讲Vuejs源码中一些比较重要的部分。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1nj4pg3s8j20dw099q3v.jpg" alt=""></p><a id="more"></a><p>愚人节快乐！！：）<br>Vuejs源码解析正在研读中哈</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;碎碎念&quot;&gt;&lt;a href=&quot;#碎碎念&quot; class=&quot;headerlink&quot; title=&quot;碎碎念&quot;&gt;&lt;/a&gt;碎碎念&lt;/h3&gt;&lt;p&gt;今天就是想简单的讲讲Vuejs源码中一些比较重要的部分。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1nj4pg3s8j20dw099q3v.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="生活" scheme="http://lmislm.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="感悟" scheme="http://lmislm.com/tags/%E6%84%9F%E6%82%9F/"/>
    
  </entry>
  
  <entry>
    <title>day79-理由-休息</title>
    <link href="http://lmislm.com/2019/03/31/2019-03-31/"/>
    <id>http://lmislm.com/2019/03/31/2019-03-31/</id>
    <published>2019-03-30T16:00:00.000Z</published>
    <updated>2019-03-31T15:24:22.004Z</updated>
    
    <content type="html"><![CDATA[<h3 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h3><p>相信我，今天虽然是玩了一会儿游戏，但是我还是看书了的。红宝书还是看了一些的。所以今天主要还是玩了一天。我怎么这么能玩，立下的一些flag都要倒下了？</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1me4hj1plj20dw0990tk.jpg" alt=""></p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;碎碎念&quot;&gt;&lt;a href=&quot;#碎碎念&quot; class=&quot;headerlink&quot; title=&quot;碎碎念&quot;&gt;&lt;/a&gt;碎碎念&lt;/h3&gt;&lt;p&gt;相信我，今天虽然是玩了一会儿游戏，但是我还是看书了的。红宝书还是看了一些的。所以今天主要还是玩了一天。我怎么这么能玩，立下的一些flag都要倒下了？&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1me4hj1plj20dw0990tk.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="生活" scheme="http://lmislm.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="感悟" scheme="http://lmislm.com/tags/%E6%84%9F%E6%82%9F/"/>
    
  </entry>
  
  <entry>
    <title>day78-订阅发布者模式</title>
    <link href="http://lmislm.com/2019/03/30/2019-03-30/"/>
    <id>http://lmislm.com/2019/03/30/2019-03-30/</id>
    <published>2019-03-29T16:00:00.000Z</published>
    <updated>2019-03-30T13:44:40.473Z</updated>
    
    <content type="html"><![CDATA[<h3 id="订阅者-发布者模式"><a href="#订阅者-发布者模式" class="headerlink" title="订阅者-发布者模式"></a>订阅者-发布者模式</h3><p>前言，最近这个模式非常的火。刚好看书又看到这里。所以就跟着敲了一遍代码，把最基本的思想理了下。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1l5krxso9j20dw0993zd.jpg" alt=""></p><h3 id="小例子"><a href="#小例子" class="headerlink" title="小例子"></a>小例子</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 订阅者-发布者模式（添加给所有对象）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> event = &#123;</span><br><span class="line">  clientList: [], <span class="comment">// 缓存对象，存放订阅者的回调函数</span></span><br><span class="line">  listen: <span class="function"><span class="keyword">function</span> (<span class="params">key, fn</span>) </span>&#123; <span class="comment">// 订阅消息</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.clientList[key]) &#123;</span><br><span class="line">      <span class="keyword">this</span>.clientList = [] <span class="comment">// 如果没有订阅过key类的消息，创建一个缓存列表</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.clientList[key].push(fn) <span class="comment">// 订阅消息加入缓存列表</span></span><br><span class="line">  &#125;,</span><br><span class="line">  trigger: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// 发布消息</span></span><br><span class="line">    <span class="keyword">let</span> key = <span class="built_in">Array</span>.prototype.shift.call(<span class="built_in">arguments</span>)</span><br><span class="line">    <span class="keyword">let</span> fns = <span class="keyword">this</span>.clientList[key]</span><br><span class="line">    <span class="keyword">if</span> (!fns || fns.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, fn; fn = fns[i++];) &#123;</span><br><span class="line">      fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 给所有对象动态安装发布-订阅功能</span></span><br><span class="line"><span class="keyword">let</span> installEvent = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> event) &#123;</span><br><span class="line">    obj[i] = event[i]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实例-给对象salesOffices 动态增加发布-订阅功能</span></span><br><span class="line"><span class="keyword">let</span> salesOffices = &#123;&#125;</span><br><span class="line">installEvent(salesOffices)</span><br><span class="line">salesOffices.listen(<span class="string">'squareMeter88'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">price</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'price='</span> + price)</span><br><span class="line">&#125;)</span><br><span class="line">salesOffices.listen(<span class="string">'squareMeter100'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">price</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'price='</span> + price)</span><br><span class="line">&#125;)</span><br><span class="line">salesOffices.trigger(<span class="string">'squareMeter88'</span>, <span class="number">200000</span>)</span><br><span class="line">salesOffices.trigger(<span class="string">'squareMeter100'</span>, <span class="number">300000</span>)</span><br></pre></td></tr></table></figure><p>end-<br><a id="more"></a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;订阅者-发布者模式&quot;&gt;&lt;a href=&quot;#订阅者-发布者模式&quot; class=&quot;headerlink&quot; title=&quot;订阅者-发布者模式&quot;&gt;&lt;/a&gt;订阅者-发布者模式&lt;/h3&gt;&lt;p&gt;前言，最近这个模式非常的火。刚好看书又看到这里。所以就跟着敲了一遍代码，把最基本的思想理了下。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1l5krxso9j20dw0993zd.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;小例子&quot;&gt;&lt;a href=&quot;#小例子&quot; class=&quot;headerlink&quot; title=&quot;小例子&quot;&gt;&lt;/a&gt;小例子&lt;/h3&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * 订阅者-发布者模式（添加给所有对象）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; event = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  clientList: [], &lt;span class=&quot;comment&quot;&gt;// 缓存对象，存放订阅者的回调函数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  listen: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;key, fn&lt;/span&gt;) &lt;/span&gt;&amp;#123; &lt;span class=&quot;comment&quot;&gt;// 订阅消息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.clientList[key]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.clientList = [] &lt;span class=&quot;comment&quot;&gt;// 如果没有订阅过key类的消息，创建一个缓存列表&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.clientList[key].push(fn) &lt;span class=&quot;comment&quot;&gt;// 订阅消息加入缓存列表&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  trigger: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123; &lt;span class=&quot;comment&quot;&gt;// 发布消息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; key = &lt;span class=&quot;built_in&quot;&gt;Array&lt;/span&gt;.prototype.shift.call(&lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; fns = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.clientList[key]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!fns || fns.length === &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, fn; fn = fns[i++];) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      fn.apply(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 给所有对象动态安装发布-订阅功能&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; installEvent = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;obj&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; event) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    obj[i] = event[i]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 实例-给对象salesOffices 动态增加发布-订阅功能&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; salesOffices = &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;installEvent(salesOffices)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;salesOffices.listen(&lt;span class=&quot;string&quot;&gt;&#39;squareMeter88&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;price&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;price=&#39;&lt;/span&gt; + price)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;salesOffices.listen(&lt;span class=&quot;string&quot;&gt;&#39;squareMeter100&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;price&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;price=&#39;&lt;/span&gt; + price)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;salesOffices.trigger(&lt;span class=&quot;string&quot;&gt;&#39;squareMeter88&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;200000&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;salesOffices.trigger(&lt;span class=&quot;string&quot;&gt;&#39;squareMeter100&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;300000&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;end-&lt;br&gt;
    
    </summary>
    
      <category term="生活" scheme="http://lmislm.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="感悟" scheme="http://lmislm.com/tags/%E6%84%9F%E6%82%9F/"/>
    
  </entry>
  
  <entry>
    <title>day77-理由-休息</title>
    <link href="http://lmislm.com/2019/03/29/2019-03-29/"/>
    <id>http://lmislm.com/2019/03/29/2019-03-29/</id>
    <published>2019-03-28T16:00:00.000Z</published>
    <updated>2019-03-29T15:32:21.166Z</updated>
    
    <content type="html"><![CDATA[<h3 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h3><p>明天有双休了！！yeah!</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614ly1g1k342uw0lj20dw099mx5.jpg" alt=""></p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;碎碎念&quot;&gt;&lt;a href=&quot;#碎碎念&quot; class=&quot;headerlink&quot; title=&quot;碎碎念&quot;&gt;&lt;/a&gt;碎碎念&lt;/h3&gt;&lt;p&gt;明天有双休了！！yeah!&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614ly1g1k342uw0lj20dw099mx5.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="生活" scheme="http://lmislm.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="感悟" scheme="http://lmislm.com/tags/%E6%84%9F%E6%82%9F/"/>
    
  </entry>
  
  <entry>
    <title>day76-理由-修bug</title>
    <link href="http://lmislm.com/2019/03/28/2019-03-28/"/>
    <id>http://lmislm.com/2019/03/28/2019-03-28/</id>
    <published>2019-03-27T16:00:00.000Z</published>
    <updated>2019-03-28T14:53:17.932Z</updated>
    
    <content type="html"><![CDATA[<h3 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h3><p>最近是真的比较忙啊。虽然比较忙，但是从平时的一些聊天中还是感觉到和别人的一些差距。这个还是要靠平时多做做题目来补全啊。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614ly1g1iwd8hnarj20dw09974u.jpg" alt=""></p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;碎碎念&quot;&gt;&lt;a href=&quot;#碎碎念&quot; class=&quot;headerlink&quot; title=&quot;碎碎念&quot;&gt;&lt;/a&gt;碎碎念&lt;/h3&gt;&lt;p&gt;最近是真的比较忙啊。虽然比较忙，但是从平时的一些聊天中还是感觉到和别人的一些差距。这个还是要靠平时多做做题目来补全啊。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614ly1g1iwd8hnarj20dw09974u.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="生活" scheme="http://lmislm.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="感悟" scheme="http://lmislm.com/tags/%E6%84%9F%E6%82%9F/"/>
    
  </entry>
  
  <entry>
    <title>day75-理由-犯困</title>
    <link href="http://lmislm.com/2019/03/27/2019-03-27/"/>
    <id>http://lmislm.com/2019/03/27/2019-03-27/</id>
    <published>2019-03-26T16:00:00.000Z</published>
    <updated>2019-03-27T14:07:49.404Z</updated>
    
    <content type="html"><![CDATA[<h3 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h3><p>这段时间果然记录下来是有点用处的！发现自己偷懒的轨迹了。自己一无所成啊。这些天都是以繁忙为借口，一直在逃避写一篇好的日志。这样是不行的啊。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614ly1g1hpfmetvrj20dw09a74q.jpg" alt=""></p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;碎碎念&quot;&gt;&lt;a href=&quot;#碎碎念&quot; class=&quot;headerlink&quot; title=&quot;碎碎念&quot;&gt;&lt;/a&gt;碎碎念&lt;/h3&gt;&lt;p&gt;这段时间果然记录下来是有点用处的！发现自己偷懒的轨迹了。自己一无所成啊。这些天都是以繁忙为借口，一直在逃避写一篇好的日志。这样是不行的啊。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614ly1g1hpfmetvrj20dw09a74q.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="生活" scheme="http://lmislm.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="感悟" scheme="http://lmislm.com/tags/%E6%84%9F%E6%82%9F/"/>
    
  </entry>
  
  <entry>
    <title>day74-理由-提测</title>
    <link href="http://lmislm.com/2019/03/26/2019-03-26/"/>
    <id>http://lmislm.com/2019/03/26/2019-03-26/</id>
    <published>2019-03-25T16:00:00.000Z</published>
    <updated>2019-03-26T15:24:42.044Z</updated>
    
    <content type="html"><![CDATA[<h3 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h3><p>最近项目终于开始提测了！这是比较好的事。然后就是最近阮一峰的ES6看了一遍了！现在开始准备看Vue技术揭秘，这是源码级别了吧！这是第二次想要阅读源码了！</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1gm17j2nxj20dw09874o.jpg" alt=""></p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;碎碎念&quot;&gt;&lt;a href=&quot;#碎碎念&quot; class=&quot;headerlink&quot; title=&quot;碎碎念&quot;&gt;&lt;/a&gt;碎碎念&lt;/h3&gt;&lt;p&gt;最近项目终于开始提测了！这是比较好的事。然后就是最近阮一峰的ES6看了一遍了！现在开始准备看Vue技术揭秘，这是源码级别了吧！这是第二次想要阅读源码了！&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1gm17j2nxj20dw09874o.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="生活" scheme="http://lmislm.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="感悟" scheme="http://lmislm.com/tags/%E6%84%9F%E6%82%9F/"/>
    
  </entry>
  
  <entry>
    <title>day73-理由-心累</title>
    <link href="http://lmislm.com/2019/03/25/2019-03-25/"/>
    <id>http://lmislm.com/2019/03/25/2019-03-25/</id>
    <published>2019-03-24T16:00:00.000Z</published>
    <updated>2019-03-25T15:11:46.201Z</updated>
    
    <content type="html"><![CDATA[<h3 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h3><p>今天又是一天，一直忙活项目的事情。暂时水到这里吧。</p><p><img src="https://ws1.sinaimg.cn/large/b15ca614gy1g1fg1fj0juj20dw099t95.jpg" alt=""></p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;碎碎念&quot;&gt;&lt;a href=&quot;#碎碎念&quot; class=&quot;headerlink&quot; title=&quot;碎碎念&quot;&gt;&lt;/a&gt;碎碎念&lt;/h3&gt;&lt;p&gt;今天又是一天，一直忙活项目的事情。暂时水到这里吧。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/b15ca614gy1g1fg1fj0juj20dw099t95.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="生活" scheme="http://lmislm.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="感悟" scheme="http://lmislm.com/tags/%E6%84%9F%E6%82%9F/"/>
    
  </entry>
  
</feed>
